C语言第九章 指针
================================
### 9.1 取地址运算
1. **%p**: 将地址以16进制输出
2. **地址的大小是否与int相同取决于编译器**
3. **&不能对没有地址的东西取地址<font color=blue>(i++,i+j)</font>，必须为明确的变量**  
4. **变量在栈中自上而下分配位置**(相邻变量中先生成的，地址更大)
5. **数组的地址是第一个单元的地址**
>printf("%p",xx)中，&a = a = &a[0]，&a[0]和&a[1]差4
>  
>*ps：a为一个数组*
### 9.2 指针
1. **指针变量**:记录地址的变量  
>`int *p = &i`
>
> int：指针指向的变量的类型
>
> *：表示指针

![IMAGE 例图](https://github.com/Baiyun2333/images/blob/main/pointer.png?raw=true)

>注：int* p,q 和 int *p,q 的结果一样
>
>p为指针变量，q为一个普通的int <font color=blue>(*p也是int，且\*号靠近int或p意思相同)</font>
2. **在函数中可通过地址访问外面的变量**
>单目运算符<U>＊</U>用来访问指针所表示的地址上的变量
3. **&与＊互为反作用**
> & → 取地址
> ＊ → 根据地址找变量
### 9.3 指针的使用例
1. **交换两个变量的值**(函数中实现,可作用到函数外的变量)
2. **函数返回多个值**:传入的参数是<U>保存带回结果</U>的变量
3. **返回运算的状态**:
>**通常情况下：** 通过返回特殊的且不属于有效范围内的值表示出错
>
>**任何数都要用到的情况下:** 状态与值分开返回 <font color=blue>*(状态：return，指针：值)* </font>
### 9.4 指针与数组
1. **参数表的数组是个指针，但可以用运算符［］计算**
> sizeof(a) == sizeof(int*)
2. **数组变量是特殊的指针**（ 数组本身表达地址，a == &a[0] ）
    **但数组单元是变量，需要用&取地址**
3. **［］运算符也可对指针做：** *p = p[0]
4. **＊也可对数组做**
5. **数组变量是const的指针,不能被赋值**
> int b[] 　<=> 　int * const b
### 9.5 指针和const (C99)
1. **指针本身可以是const，其指向的变量也可以是const**
2. **判断哪个被const的标志是:** <font color=red>const在＊的前面还是后面</font>
>  * const在＊前：所指变量不能被修改
>
>  * const在＊后：指针不能被修改
3. **转换：** 可以把非const的值转换为const的
>   void f(const int *x);
>
>   int a = 15;
>
>   f(&a)　　　<font color=red>→ f中不会改变a的大小</font>
4. **const数组**
>const int a[] = {1,2,3}　　　<font color=red>→数组变量本来就是const的指针，这里表示数组单元都是const int</font>
5. **为保护数组不被破坏,可设置参数为const：** int sum(const int a[])
### 9.6 指针运算
1. **指针+1**：指向下一个单元，地址大小增加sizeof的值
> ＊(p+n) 　<=> 　a[n]
2. **两个指针相减：** 结果是<U>(地址差 / sizeof(类型))</U> →<font color=blue>之间有几个单元(能放几个)</font>
3. **＊p++:**取出p所指的数据,顺便把p指向下一个单元
> 优先级: ＊ < ++
4. **指针可使用<，==，!= 等符号来进行地址的比较**
5. **NULL**：预定定义的符号，表示0地址
6. **指向不同类型的指针不能直接互相赋值**：避免用错指针
> (int)q = (char)p;
>
> *q = 0;　　　　　=> p[0]~p[3] = 0
7. **转换类型**：int \*p = &i ; void \*q = (void\*)p 　　*=> 以不同眼光通过p看它所指的变量*
> void：全能型指针
8. **用指针干什么：**
>①传入较大数据时，用作参数
>
>②传入数组后对数组做操作
>
>③函数不止一个结果
>
>④修改不止一个变量
>
>⑤动态申请内存
### 9.7 动态内存分配
1. **int \*a = (int\*)malloc(n * sizeof(int))** <font color=red>→动态内存分配</font>
>(int*)：类型转换，void\*→int\*
>
>malloc(xxx)：占据多少空间
2. **malloc(size_t):**
>①需要<u>#include<stdlib.h></u>
>
>②返回是<u>void*</u>
>
>③最后要用<font color=red>free(指针)</font>把申请的空间还给系统
>
>④申请失败则返回0(NULL)
3. **free()只能填申请来的空间的<u>首地址</u>**